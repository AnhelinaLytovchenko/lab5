<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Дрифт: коротко про головне</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Верхній блок з заголовком -->
        <header>
            <h1 class="left">Дрифт: коротко про головне</h1>
            <div class="x-header">
                <h2 class="right" id="header-text">Дрифт - це мистецтво!</h2>
            </div>
        </header>

        <!-- Блоки для роботи зі списками -->
        <div class="blocks-container">
            <div class="block" id="block1" tabindex="0">
                <p>Натисніть, щоб додати список</p>
            </div>
            <div class="block" id="block2" tabindex="0">
                <p>Натисніть, щоб додати список</p>
            </div>
            <div class="block" id="block3" tabindex="0">
                <p>Натисніть, щоб додати список</p>
            </div>
        </div>

        <!-- Футер -->
        <footer>
            <ul>
                <li>Контакти:</li>
                <li>Ліна Л</li>
                <li>driftloversUA@gmail.com</li>
                <li>FR legends: @lina & @REVO</li>
            </ul>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const blocks = document.querySelectorAll('.block');

            blocks.forEach(block => {
                block.addEventListener('focus', () => {
                    if (!block.querySelector('form')) {
                        const form = document.createElement('form');
                        form.innerHTML = `
                            <input type="text" placeholder="Введіть елемент" class="list-input" />
                            <button type="button" class="add-item">Додати</button>
                            <button type="button" class="save-list">Зберегти</button>
                        `;

                        const list = document.createElement('ul');
                        list.className = 'list';

                        form.querySelector('.add-item').addEventListener('click', () => {
                            const input = form.querySelector('.list-input');
                            const value = input.value.trim();
                            if (value) {
                                const li = document.createElement('li');
                                li.textContent = value;

                                const deleteButton = document.createElement('button');
                                deleteButton.textContent = 'Видалити';
                                deleteButton.addEventListener('click', () => {
                                    li.remove();
                                    saveToLocalStorage(block.id, getListItems(list));
                                });

                                li.appendChild(deleteButton);
                                list.appendChild(li);
                                input.value = '';
                                saveToLocalStorage(block.id, getListItems(list));
                            }
                        });

                        form.querySelector('.save-list').addEventListener('click', () => {
                            saveToLocalStorage(block.id, getListItems(list));
                            block.innerHTML = '';
                            block.appendChild(list);
                        });

                        block.innerHTML = '';
                        block.appendChild(list);
                        block.appendChild(form);

                        loadFromLocalStorage(block.id, list);
                    }
                });
            });

            function saveToLocalStorage(blockId, items) {
                localStorage.setItem(blockId, JSON.stringify(items));
            }

            function loadFromLocalStorage(blockId, list) {
                const items = JSON.parse(localStorage.getItem(blockId) || '[]');
                items.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = item;

                    const deleteButton = document.createElement('button');
                    deleteButton.textContent = 'Видалити';
                    deleteButton.addEventListener('click', () => {
                        li.remove();
                        saveToLocalStorage(blockId, getListItems(list));
                    });

                    li.appendChild(deleteButton);
                    list.appendChild(li);
                });
            }

            function getListItems(list) {
                return Array.from(list.children).map(li => li.firstChild.textContent);
            }
        });
    </script>
</body>
</html>
